<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menú desplegable</title>

    <style type="text/css">
        * {
            margin: 0px;
            padding: 0px;
            text-decoration: none;
            list-style-type: none;
            font-family: sans-serif;

        }

        #menu li a {
            display: block;
            color: black;
            padding: .5em;
        }

        #menu>ul>li>a {
            background: #C8FFAD;
        }

        #menu li ul {
            background: #E4ADFF;
            max-height: 0;
            overflow: hidden;
            transition: max-height .5s;
        }

        #menu li.mostrar ul {
            max-height: 500px;
        }
    </style>
</head>

<body>

    <nav id="menu">
        <ul>
            <li>
                <a href="#">Item 1</a>
                <ul>
                    <li><a href="#">Opción 1</a></li>
                    <li><a href="#">Opción 2</a></li>
                    <li class="separador"></li>
                    <li><a href="#">Opción 3</a></li>
                    <li><a href="#">Opción 4</a></li>
                    <li><a href="#">Opción 5</a></li>
                </ul>
            </li>
            <li>
                <a href="#">Item 2</a>
                <ul>
                    <li><a href="#">Opción 1</a></li>
                    <li class="separador"></li>
                    <li><a href="#">Opción 2</a></li>
                    <li><a href="#">Opción 3</a></li>
                    <li><a href="#">Opción 4</a></li>
                    <li><a href="#">Opción 5</a></li>
                </ul>
            </li>
            <li>
                <a href="#">Item 3</a>
                <ul>
                    <li><a href="#">Opción 1</a></li>
                    <li><a href="#">Opción 2</a></li>
                    <li><a href="#">Opción 3</a></li>
                    <li class="separador"></li>
                    <li><a href="#">Opción 4</a></li>
                    <li><a href="#">Opción 5</a></li>
                    <li class="separador"></li>
                    <li><a href="#">Opción 1</a></li>
                    <li><a href="#">Opción 2</a></li>
                    <li><a href="#">Opción 3</a></li>
                </ul>
            </li>


        </ul>

    </nav>


    <script>
        //se trata de crear una función que invoquemos cuando pulsemos en cualquier enlace de primer nivel
        //la función mostrará u ocultará el UL asociado 

        //Lo realizaremos cambiando el estilo directamente con el.style

        window.addEventListener("load",e =>{

            const encabezados=document.querySelectorAll("#menu>ul>li>a");
            console.log(encabezados);

            //asignamos despliega como funcion manejadora
            encabezados.forEach(element=>{
                element.addEventListener("click", despliega)
            });

            //esta es la sencilla
            /*function despliega(e) {
                    e.preventDefault();
                    const nodo=e.target;
                    nodo.parentNode.classList.toggle("mostrar");
                }*/

            function despliega(e) {
                e.preventDefault();
                const nodo=e.target;
                var lipadre=nodo.parentNode;

                //si esta mostrado oculta sobre el que hemos pinchado
                if(lipadre.classList.contains("mostrar")) {
                    lipadre.classList.remove("mostrar");
                } else {
                    mostrados=lipadre.parentNode.getElementsByClassName("mostrar");
                    for (var i=0;i<mostrados.length;i++) {
                        mostrados[i].classList.remove("mostrar");
                    }
                    lipadre.classList.add("mostrar");
                }

            }
            
        })
       

    </script>

</body>

</html>